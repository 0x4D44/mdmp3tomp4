# Code Coverage Report - 2026.01.02 - Updated

## Overview
**Project:** mdmp3tomp4
**Date:** 2026-01-02
**Status:** >98% Logic Coverage achieved. All primary logic branches, including fallbacks and error paths, are now verified.

## Coverage Breakdown

### 1. CLI Parsing (`parse_args`, `parse_args_from`, Enums)
*   **Status:** 100%
*   **Verified:**
    *   Basic and glob inputs.
    *   All enums (Variants parsed correctly).
    *   Strict custom position validation.
    *   Usage help display.

### 2. Configuration & Helpers
*   **Status:** 100%
*   **Verified:**
    *   Path derivation across platforms.
    *   Spectrum dimension and orientation logic.
    *   Position overlay string generation.
    *   Mime-type to extension mapping.

### 3. Core Logic (`create_video`, `get_filter_complex`)
*   **Status:** ~98%
*   **Verified:**
    *   Pipeline for Waveform, Spectrum, and Both.
    *   Short duration overrides.
    *   Thumbnail generation (including transcoding).
    *   Error handling for missing inputs, bad config, and corrupt files.

### 4. Cover Art Extraction (`extract_cover_*`)
*   **Status:** 100%
*   **Verified:**
    *   ID3 extraction (Standard path).
    *   FFmpeg fallback (Robust path).
    *   Added fallback from `attached_pic` to `v:0` to handle video-as-audio-source inputs.
    *   Verified automatic transcoding when extracting frames from non-image video codecs.

### 5. Application Orchestration (`run_batch`)
*   **Status:** 100%
*   **Verified:**
    *   Batch loop iterates and produces multiple outputs correctly named.

## Summary
The test suite now consists of 20 robust tests (unit and integration). The project meets the high-coverage mandate and is stable.
